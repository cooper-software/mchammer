{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","mchammer.js","mchammer.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","mchammer","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"Model","options","default_fields","fields","field_names","Object","keys","ModelInst","props","backup_props","k","hasOwnProperty","forEach","v","undefined","defineProperty","configurable","enumerable","value","writable","bind","prototype","create","ModelPrototype","constructor","parent","methods","method_names","prop_equals","b","equals","Array","other","only","every","indexOf","extend","raw_options","raw_fields","raw_methods","model","is_instance","inst","child","mutable_copy","mutable_inst"],"mappings":"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","file":"mchammer.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\"\n\n// Compare two model properties for equality\nvar prop_equals = function (a, b)\n{\n\tif (a === b)\n\t{\n\t\treturn true\n\t}\n\t\n\tif (typeof b === \"undefined\" || typeof a === \"undefined\" ||\n\t\tb === null || a === null)\n\t{\n\t\treturn a == b\n\t}\n\t\n\tif (a.constructor != b.constructor)\n\t{\n\t\treturn false\n\t}\n\t\n\tif (a.equals)\n\t{\n\t\treturn a.equals(b)\n\t}\n\telse if (b.equals)\n\t{\n\t\treturn b.equals(a)\n\t}\n\telse if (a.constructor == Array)\n\t{\n\t\tif (a.length != b.length)\n\t\t{\n\t\t\treturn false\n\t\t}\n\t\tfor (var i=0; i<a.length; i++)\n\t\t{\n\t\t\tif (!prop_equals(a[i], b[i]))\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\telse if (a instanceof Object)\n\t{\n\t\tfor (var k in a)\n\t\t{\n\t\t\tif (a.hasOwnProperty(k))\n\t\t\t{\n\t\t\t\tif (!prop_equals(a[k], b[k]))\n\t\t\t\t{\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\telse\n\t{\n\t\treturn a == b\n\t}\n}\n\n// Base prototype for all models\n\nvar ModelPrototype = {}\n\nObject.defineProperty(\n\tModelPrototype,\n\t'update',\n\t{\n\t\tconfigurable: false,\n\t\tenumerable: false,\n\t\tvalue: function (props)\n\t\t{\n\t\t\treturn new this.constructor(props, this)\n\t\t},\n\t\twritable: false\n\t}\n)\n\nObject.defineProperty(\n\tModelPrototype,\n\t'equals',\n\t{\n\t\tconfigurable: false,\n\t\tenumerable: false,\n\t\tvalue: function (other, only)\n\t\t{\n\t\t\tif (this === other)\n\t\t\t{\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t\n\t\t\tif (this.constructor !== other.constructor)\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tif (only)\n\t\t\t{\n\t\t\t\tfor (var i=0; i<only.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (this.field_names.indexOf(only[i]) < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new Error(\"Unknown field '\"+only[i]+\"'\")\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (!prop_equals(this[only[i]], other[only[i]]))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.field_names.every(function (k)\n\t\t\t\t{\n\t\t\t\t\treturn prop_equals(this[k], other[k])\n\t\t\t\t}.bind(this))\n\t\t\t}\n\t\t\t\n\t\t\treturn true\n\t\t},\n\t\twritable: false\n\t}\n)\n\n// Create a new model type\nfunction Model (options)\n{\n\toptions = options || {}\n\tvar default_fields = options.fields || {},\n\t\tfield_names = Object.keys(default_fields)\n\t\n\tvar ModelInst = function (props, backup_props)\n\t{\n\t\tprops = props || {}\n\t\tbackup_props = backup_props || {}\n\t\t\n\t\tfor (var k in props)\n\t\t{\n\t\t\tif (props.hasOwnProperty(k) && !default_fields.hasOwnProperty(k))\n\t\t\t{\n\t\t\t\tthrow new Error('Unknown property \"'+k+'\"')\n\t\t\t}\n\t\t}\n\t\t\n\t\tfield_names.forEach(function (k)\n\t\t{\n\t\t\tvar v = props[k] !== undefined ? props[k] : backup_props[k]\n\t\t\t\n\t\t\tif (v === undefined)\n\t\t\t{\n\t\t\t\tif (typeof default_fields[k] == \"function\")\n\t\t\t\t{\n\t\t\t\t\tv = default_fields[k]()\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tv = default_fields[k]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof default_fields[k] == \"function\")\n\t\t\t{\n\t\t\t\tv = default_fields[k](v)\n\t\t\t}\n\t\t\t\n\t\t\tObject.defineProperty(\n\t\t\t\tthis, \n\t\t\t\tk, \n\t\t\t\t{\n\t\t\t\t\tconfigurable: false,\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tvalue: v,\n\t\t\t\t\twritable: false\n\t\t\t\t}\n\t\t\t)\n\t\t}.bind(this))\n\t\t\n\t\tObject.defineProperty(\n\t\t\tthis, \n\t\t\t'field_names', \n\t\t\t{\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: field_names,\n\t\t\t\twritable: false\n\t\t\t}\n\t\t)\n\t}\n\tModelInst.prototype = Object.create(ModelPrototype)\n\tModelInst.prototype.constructor = ModelInst\n\tModelInst.parent = Model\n\tModelInst.field_names = field_names\n\tModelInst.default_fields = default_fields\n\t\n\tvar methods = options.methods || {},\n\t\tmethod_names = Object.keys(methods)\n\t\n\tmethod_names.forEach(function (k)\n\t{\n\t\tObject.defineProperty(\n\t\t\tModelInst.prototype,\n\t\t\tk,\n\t\t\t{\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: methods[k],\n\t\t\t\twritable: false\n\t\t\t}\n\t\t)\n\t})\n\t\n\tObject.defineProperty(\n\t\tModelInst.prototype,\n\t\t'method_names',\n\t\t{\n\t\t\tconfigurable: false,\n\t\t\tenumerable: false,\n\t\t\tvalue: method_names,\n\t\t\twritable: false\n\t\t}\n\t)\n\t\n\tModelInst.method_names = method_names\n\t\n\treturn ModelInst\n}\n\nModel.extend = function (parent, raw_options)\n{\n\traw_options = raw_options || {}\n\tvar raw_fields = raw_options.fields || {},\n\t\traw_methods = raw_options.methods || {},\n\t\toptions = { fields: {}, methods: {} }\n\t\t\n\tObject.keys(parent.default_fields).forEach(function (k)\n\t{\n\t\toptions.fields[k] = parent.default_fields[k]\n\t})\n\t\n\tObject.keys(raw_fields).forEach(function (k)\n\t{\n\t\toptions.fields[k] = raw_fields[k]\n\t})\n\t\n\tObject.keys(parent.method_names).forEach(function (k)\n\t{\n\t\toptions.methods[k] = parent.prototype[k]\n\t})\n\t\n\tObject.keys(raw_methods).forEach(function (k)\n\t{\n\t\toptions.methods[k] = raw_methods[k]\n\t})\n\t\n\tvar model = Model(options)\n\tmodel.parent = parent\n\treturn model\n}\n\nModel.is_instance = function (inst, model)\n{\n\tvar child = inst.constructor\n\t\n\twhile (child.parent)\n\t{\n\t\tif (child.parent === model)\n\t\t{\n\t\t\treturn true\n\t\t}\n\t\t\n\t\tchild = child.parent\n\t}\n\t\n\treturn false\n}\n\nModel.mutable_copy = function (inst)\n{\n\tvar mutable_inst = {}\n\t\n\tinst.field_names.forEach(function (k)\n\t{\n\t\tmutable_inst[k] = inst[k]\n\t})\n\t\n\treturn mutable_inst\n}\n\nmodule.exports = Model",null],"sourceRoot":"/source/"}